<!DOCTYPE html>
<html class="no-js">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="renderer" content="webkit" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta name="format-detection" content="telephone=no" />
    <link rel="stylesheet" href="../reference/mui/css/mui.min.css" />
    <link rel="stylesheet" href="../reference/css/common.css" />
    <link rel="stylesheet" href="../reference/mui/css/mui.picker.min.css" />
    <link rel="stylesheet" href="css/tcj-font.css" />
</head>
<style type="text/css">
    body,
    html {
        height: 100%;
        background: #f7f7f7;
    }
    
    .row-content {
        height: 40px;
        line-height: 40px;
        padding: 0 15px;
        border-bottom: 1px solid #eeeeee;
        font-size: 14px;
        color: #666666;
        background: #ffffff;
    }
    
    .row-content1 {
        height: 30px;
        line-height: 30px;
        padding: 0 15px;
        font-size: 16px;
        color: #666666;
        background: #ffffff;
    }
    
    .row-right {
        text-align: right;
        color: #333333;
    }
    
    .new-icon-color {
        color: #aaa;
    }
    
    .new-row-tcj {
        height: 60px;
        line-height: 60px;
    }
    
    .wuzi-list-title {
        background: #fff;
        display: flex;
        height: 40px;
        line-height: 40px;
        border-bottom: 1px solid #ddd;
    }
    
    .shugang {
        display: inline-block;
        width: 5px;
        height: 20px;
        background: #2aabd2;
        margin: 10px 18px;
        border-radius: 15px;
    }
    
    .shugang-text {
        color: #444;
        font-weight: bold;
        font-size: 16px;
    }
    
    .aa {
        width: 100%;
        height: 94px;
        border-bottom: 1px solid #eee;
        padding: 10px;
    }
    
    .bb {
        width: 64px;
        height: 64px;
        display: inline-block;
        float: left;
    }
    
    .bb img {
        width: 64px;
        height: 64px;
    }
    
    .cc {
        width: 100%;
        /* width: calc(100% - 64px); */
        height: 85px;
        display: inline-block;
        float: left;
        padding-left: 15px;
    }
    
    .dd {
        /*font-weight: bold;*/
        font-size: 14px;
        height: 20px;
        /*line-height: 37px;*/
        color: #333;
    }
    
    .ee {
        /*height: 27px;*/
        /*line-height: 27px;*/
        font-size: 12px;
        color: #777;
    }
    
    .ff {
        height: 30px;
        line-height: 30px;
    }
    
    .price {
        font-size: 16px;
        font-weight: bold;
        color: #ffa740;
    }
    
    .price span {
        font-size: 13px;
        font-weight: 400;
        color: #a5a5a5;
    }
    
    .btn-minus span {
        font-size: 30px;
        color: #bbb;
    }
    
    .btn-plus span {
        font-size: 30px;
        color: #55cbeb;
    }
    
    .selection-active {
        color: #55cbeb;
    }
    
    .add {
        position: absolute;
        /*bottom: 170px;*/
        right: 30px;
        width: 45px;
        height: 45px;
        line-height: 45px;
        background: #5ac2ee;
        color: #fff;
        text-align: center;
        opacity: 0.9;
        font-size: 15px;
        border-radius: 50%;
        box-shadow: 0px 0px 10px 5px #5ac2ee;
        z-index: 90;
    }
</style>

<body>
    <header class="mui-bar mui-bar-nav">
        <h1 class="mui-title" id="beforeTitle">新建申请</h1>
        <button id="back" class="mui-btn mui-btn-blue mui-btn-link mui-btn-nav mui-pull-left">
        <span class="mui-icon mui-icon-left-nav"></span>
        返回
      </button>
        <button id="suretijiao" class="mui-btn mui-btn-blue mui-btn-link mui-btn-nav mui-pull-right" style="margin-right: 0">
        提交
      </button>
    </header>

    <div id="warn" class="warn" hidden>
        <small></small>
    </div>

    <div id="loading" class="loading1" hidden>
        <div class="loading2">
            <span class="mui-spinner" style="width: 80px; height: 80px"></span>
        </div>
    </div>

    <div class="mui-content">
        <div class="mui-row row-content">
            <div class="mui-col-sm-5 mui-col-xs-5">
                <span class="mui-icon iconfont icon-apply-person new-icon-color"></span> 申请人：
            </div>
            <div class="mui-col-sm-7 mui-col-xs-7 row-right">
                <input id="userName" type="text" style="
              width: 100%;
              border: 0;
              outline: none;
              font-size: 14px;
              padding: 0px;
              text-align: right;
              margin-bottom: 0;
              height: 21px;
            " placeholder="用户名" readonly="readonly" />
            </div>
        </div>
        <div class="mui-row row-content">
            <div class="mui-col-sm-5 mui-col-xs-5">
                <span class="mui-icon iconfont icon-apply-keshi new-icon-color"></span> 申请科室：
            </div>
            <div class="mui-col-sm-7 mui-col-xs-7 row-right applyDept">
                <input type="text" id="applyDept" style="
              width: 80%;
              border: 0;
              outline: none;
              font-size: 14px;
              padding: 0px;
              text-align: right;
              margin-bottom: 0;
              height: 21px;
            " placeholder="申请科室" readonly="readonly" />
                <!--<span class="mui-icon iconfont icon-youjiantou" style="color:#55cbeb;font-weight: bold;"></span>-->
            </div>
        </div>
        <div class="mui-row row-content">
            <div class="mui-col-sm-5 mui-col-xs-5">
                <span class="mui-icon iconfont icon-jiaohuo-date new-icon-color"></span> 申请时间：
            </div>
            <div class="mui-col-sm-7 mui-col-xs-7 row-right applyTime">
                <input type="text" id="applyTime" style="
              width: 80%;
              border: 0;
              outline: none;
              font-size: 14px;
              padding: 0px;
              text-align: right;
              margin-bottom: 0;
              height: 21px;
            " placeholder="请选择申请时间" readonly="readonly" />
                <span class="mui-icon iconfont icon-youjiantou" style="color: #55cbeb; font-weight: bold"></span>
            </div>
        </div>

        <!--<div class="mui-row row-content">

				<div class="mui-col-sm-5 mui-col-xs-5">

					<span class="mui-icon   iconfont icon-dai-tijiao new-icon-color"></span> 交货期：
				</div>
				<div class="mui-col-sm-7 mui-col-xs-7 row-right askGive">
					<input type="text" id="askGive" style="width: 80%;border:0;outline:none;font-size:14px;padding:0px;text-align:right;margin-bottom:0;height:21px;" placeholder="请选择交货日期" readonly="readonly" />
					<span class="mui-icon iconfont icon-youjiantou" style="color:#55cbeb;font-weight: bold;"></span>
				</div>
			</div>-->

        <!-- <div class="mui-row row-content new-row-tcj">
            <div class="mui-col-sm-5 mui-col-xs-5" style="padding-left: 20px; color: #aaaaaa; font-size: 12px">
                备注:
            </div>
            <div class="mui-col-sm-7 mui-col-xs-7 row-right">
                <input id="desc" type="text" style="
              padding: 0px;
              border: 0px;
              outline: none;
              text-align: right;
              margin-bottom: 0;
              height: 20px;
              line-height: 20px;
            " placeholder="请输入备注" />
            </div>
        </div> -->
    </div>
    <div class="wuzi-list wuzi-list-wocao">
        <div class="wuzi-list-content" style="margin: 10px 5px">
            <div class="wuzi-list-title">
                <span class="shugang"></span>
                <span class="shugang-text">常用物资列表</span>
            </div>
            <div style="background: #fff" class="wuzi-list-new"></div>
        </div>
    </div>
    <div class="wuzi-list mlgbd" style="">
        <div class="wuzi-list-content" style="margin: 10px 5px; padding-bottom: 55px">
            <div class="wuzi-list-title">
                <span class="shugang"></span>
                <span class="shugang-text">不常用物资列表</span>
                <div class="add">添加</div>
            </div>
            <div class="wuzi-list-new-choose" style="background: #fff">
                <!--<div class="aa">
						<div class="bb"><img src="img/2.png"></div>
						<div class="cc">
							<div class="dd word-omit">日你哥现任把那边</div>
							<div class="ee">T5 22W</div>
							<div class="ff mui-row">
								<div class="mui-col-xs-6 price">
									<span>剩余&nbsp;&nbsp;</span>1
								</div>
								<div class="mui-col-xs-2 right btn-minus" style="padding-top:2px;">
									<span class="mui-icon  iconfont  icon-jian"></span>
								</div>
								<div class="mui-col-xs-2 center num-div" style="padding-top:2px;">0</div>
								<div class="mui-col-xs-2 btn-plus" style="padding-top:2px;">
									<span class="mui-icon  iconfont  icon-jia1"></span>
								</div>
							</div>
						</div>
					</div>-->
            </div>
        </div>
    </div>
    <!-- <nav class="mui-bar mui-bar-tab" style="background-color:#fff;">

			<a class="mui-tab-item class-icon dai-tijiao">
				<span class="mui-icon iconfont icon-dai-tijiao"></span>
				<span class="mui-tab-label">待处理项</span>
			</a>

			<a class="mui-tab-item select-icon  new-project mui-active">
				<span class="mui-icon iconfont icon-new-project"></span>
				<span class="mui-tab-label">新建项目</span>
			</a>
			<a class="mui-tab-item index-icon  my-plan  ">
				<span class="mui-icon iconfont icon-my-plan"></span>
				<span class="mui-tab-label">我的计划</span>
			</a>

		</nav> -->
</body>
<script src="../reference/mui/js/mui.min.js" type="text/javascript"></script>
<script src="../reference/js/jquery-2.1.4.js" type="text/javascript"></script>
<script src="../reference/js/common.js" type="text/javascript"></script>
<script src="../reference/mui/js/mui.picker.min.js" type="text/javascript"></script>
<!--<script src="../../cordova.js" type="text/javascript"></script>-->
<script src="js/$ajax.js" type="text/javascript"></script>
<script type="text/javascript">
    var baseUrl = localStorage.getItem("url");
    var workNo = localStorage.getItem("workNo");
    var deptNum = localStorage.getItem("deptCode");
    var deptName = localStorage.getItem("deptName");
    var name = localStorage.getItem("name");
    var dataGroupCode = localStorage.getItem("dataGroupCode");
    $("#userName").val(name);
    $("#applyDept").val(deptName);
    $("#applyTime").val(date_YMD);
    var setArry = [];

    //不常用数据保存
    var wuziChoose22 = localStorage.getItem("wuzi-choose");
    var wuziChoose = JSON.parse(wuziChoose22);
    console.log(wuziChoose);
    //基础信息保存
    var baseInfo22 = localStorage.getItem("wuzi-choose-info");
    var baseInfo = JSON.parse(baseInfo22);
    console.log("基础部分");
    console.log(baseInfo);
    var beforeLis22 = localStorage.getItem("wuzi-choose-before");
    var beforeList = JSON.parse(beforeLis22);
    console.log("列表部分");
    console.log(beforeList);

    getSeilfInfo();
    //判断缓存信息

    function getSeilfInfo() {
        if (beforeList == null || beforeList.length == 0) {
            loadView();
        } else {
            setArry = beforeList;
            loadViewSelf();
            //				setHeight();
        }
        // loadView();
        if (baseInfo == null) {} else {
            $("#desc").val(baseInfo.remark);
        }
        if (wuziChoose == null || wuziChoose.length == 0) {
            //			$(".mlgbd").hide();
        } else {
            //			$(".mlgbd").show();
            console.log(wuziChoose);
            loadViewSelf2();
        }
        //			setHeight();
    }

    function loadView() {
        var prames = {
            deptNum: deptNum,
            deptName: deptName,
            // deptNum: "",
            // deptName: "",
        };
        prames = JSON.stringify(prames);
        $ajax("query", "MDSQ0103", prames, (res) => {
            let list = res.blocks.result.rows;
            console.log(res);
            list.map((item) => {
                setArry.push({
                    image: null,
                    matSpec: item.matSpec,
                    matName: item.matName,
                    matNum: item.matNum,
                    matTypeName: item.matTypeName,
                    storageNum: "100",
                    unitName: item.unitName,
                    applyNum: 0,
                    matModel: item.matModel,
                    unit: item.unit,
                });
            });
            loadViewSelf();
        });
        // $.ajax({
        //     //				url: "../json/new-apply.json",
        //     //				type: "get",
        //     url: baseUrl + "app_DeliveryController.do?queryCommonlyUsedMat",
        //     type: "post",
        //     data: {
        //         deptNum: deptNum,
        //     },
        //     success: function(data) {
        //         var data = eval("(" + data + ")");
        //         console.log(data);
        //         var list = data.obj.data;
        //         for (var i = 0; i < list.length; i++) {
        //             var aa = {
        //                 image: null,
        //                 matSpec: list[i].matSpec,
        //                 matName: list[i].matName,
        //                 matNum: list[i].matNum,
        //                 matTypeName: list[i].matTypeName,
        //                 storageNum: list[i].totalNum,
        //                 unitName: list[i].unitName,
        //                 applyNum: 0,
        //                 matModel: list[i].matModel,
        //                 unit: list[i].unit,
        //             };
        //             setArry.push(aa);
        //         }

        //         loadViewSelf();
        //         //					setHeight();
        //     },
        // });
    }

    function loadViewSelf() {
        var com = "before";
        var tasklist = "";
        for (var i = 0; i < setArry.length; i++) {
            tasklist += createView(
                setArry[i].image,
                setArry[i].matSpec,
                setArry[i].matName,
                setArry[i].matNum,
                setArry[i].storageNum,
                setArry[i].unitName,
                setArry[i].applyNum,
                com
            );
        }
        $(".wuzi-list-new").html(tasklist);
    }

    function loadViewSelf2() {
        var com = "late";
        var tasklist2 = "";
        if (wuziChoose == null) {
            return;
        }
        for (var i = 0; i < wuziChoose.length; i++) {
            tasklist2 += createView(
                wuziChoose[i].image,
                wuziChoose[i].matSpec,
                wuziChoose[i].matName,
                wuziChoose[i].matNum,
                wuziChoose[i].storageNum,
                wuziChoose[i].unitName,
                wuziChoose[i].applyNum,
                com
            );
        }
        $(".wuzi-list-new-choose").html(tasklist2);
    }

    function createView(
        image,
        matSpec,
        matName,
        matNum,
        storageNum,
        unitName,
        applyNum,
        com
    ) {
        var jsonObj = {
            image: image,
            matSpec: matSpec,
            matName: matName,
            matNum: matNum,
            storageNum: storageNum,
            unitName: unitName,
            applyNum: applyNum,
            com: com,
        };
        var jsonString = JSON.stringify(jsonObj);
        ("");
        var html = "";
        html += "<div  id='" + jsonString + '\' class="aa">';
        // if (image == null) html += '<div class="bb"><img src=""></div>';
        // else html += '<div class="bb"><img src="' + baseUrl + image + '"></div>';
        html += '<div class="cc">';
        html += '	<div class="dd word-omit">' + matName + "</div>";
        html += '	<div class="ee">型号：' + matSpec + "</div>";
        html += '	<div class="ff mui-row">';
        html += '	<div class="mui-col-xs-5 price">';
        html += "		<span style='font-size:16px'>选择数量&nbsp;&nbsp;</span></div>";
        html +=
            '	<div class="mui-col-xs-2 right btn-minus" style="padding-top:2px;">';
        html += '	<span class="mui-icon  iconfont  icon-jian"></span>';
        html += "	</div>";
        //			html += '	<div class="mui-col-xs-2 center num-div" style="padding-top:2px;">' + applyNum + '</div>';
        html +=
            '	<div class="mui-col-xs-3 center num-div" style="padding-top:2px;">';
        html +=
            "	<input  id='" +
            jsonString +
            '\' class="numInput"  type="number"  style="width: 45%;border:0;outline:none;font-size:14px;padding:0px;text-align:center;margin-bottom:0;height:21px;"  placeholder="0"  value="' +
            applyNum +
            '" />';
        html += "</div>";
        html += '	<div class="mui-col-xs-2 btn-plus" style="padding-top:2px;">';
        html += '	<span class="mui-icon  iconfont  icon-jia1"></span>';
        html += "	</div>";
        html += "</div>";
        html += "</div>";
        html += "</div>";

        return html;
    }

    /*
     * 列表部分按钮的加、减
     * */
    //增加
    mui("body").on("tap", ".icon-jia1", function() {
        blurCancel();
        var _this_parent = this.parentNode.parentNode.parentNode.parentNode;
        var aaa = JSON.parse(_this_parent.id).com;
        //						console.log(aaa)
        if (aaa == "before") {
            var numSelf = JSON.parse(_this_parent.id).matNum;
            var maxNum = JSON.parse(_this_parent.id).storageNum;
            var valueSelf = Number(
                _this_parent.children[0].children[2].children[2].children[0].value
            );
            valueSelf += 1;

            for (var i = 0; i < setArry.length; i++) {
                if (setArry[i].matNum == numSelf) {
                    setArry[i].applyNum = valueSelf;
                    break;
                }
            }

            _this_parent.children[0].children[2].children[2].children[0].value =
                setArry[i].applyNum;

            //				console.log(valueSelf)
        } else {
            var numSelf = JSON.parse(_this_parent.id).matNum;
            var maxNum = JSON.parse(_this_parent.id).storageNum;
            //			console.log(_this_parent.id);
            //			console.log(_this_parent.children[1].children[2].children[2].innerHTML);
            var valueSelf = Number(
                _this_parent.children[0].children[2].children[2].children[0].value
            );
            valueSelf += 1;
            for (var i = 0; i < wuziChoose.length; i++) {
                if (wuziChoose[i].matNum == numSelf) {
                    wuziChoose[i].applyNum = valueSelf;
                    break;
                }
            }

            _this_parent.children[0].children[2].children[2].children[0].value =
                wuziChoose[i].applyNum;
            //				console.log(wuziChoose);
        }
    }); //减少
    mui("body").on("tap", ".icon-jian", function() {
        blurCancel();
        var _this_parent = this.parentNode.parentNode.parentNode.parentNode;
        var aaa = JSON.parse(_this_parent.id).com;
        //			console.log(aaa);
        if (aaa == "before") {
            var numSelf = JSON.parse(_this_parent.id).matNum;
            var valueSelf = Number(
                _this_parent.children[0].children[2].children[2].children[0].value
            );
            valueSelf -= 1;
            if (valueSelf < 0) {
                showMsg("数量不能小于0！");
                return;
            }
            //				console.log(valueSelf)
            _this_parent.children[0].children[2].children[2].children[0].value =
                valueSelf;
        } else {
            var numSelf = JSON.parse(_this_parent.id).matNum;
            var valueSelf = Number(
                _this_parent.children[0].children[2].children[2].children[0].value
            );
            valueSelf -= 1;
            if (valueSelf < 0) {
                showMsg("数量不能小于0！");
                return;
            }
            //				console.log(valueSelf)
            _this_parent.children[0].children[2].children[2].children[0].value =
                valueSelf;
        }
    });

    //确认提交
    mui("body").on("tap", "#suretijiao", function() {
        blurCancel();
        //			if($("#askGive").val() == "") {
        //				showMsg("请选择交货时间！");
        //				return;
        //			}
        var aaaaaa = [];
        var numRight = true;
        var isSubmit = true;
        var re = /^\d+$/;
        var showMsgString = "";
        var wuzilistnew = $(".wuzi-list-new input[class='numInput']"); //常用
        var wuzilistnewchoose = $(
            //不常用
            ".wuzi-list-new-choose input[class='numInput']"
        );
        //常用
        console.log("setArry", setArry);
        console.log("wuziChoose", wuziChoose);
        for (var i = 0; i < setArry.length; i++) {
            var cc = {
                matNum: setArry[i].matNum,
                matName: setArry[i].matName,
                matTypeName: setArry[i].matTypeName,
                matModel: setArry[i].matModel,
                matSpec: setArry[i].matSpec,
                unit: setArry[i].unit,
                unitName: setArry[i].unitName,
                applyNum: Number(wuzilistnew[i].value),
            };
            //				if(!re.test(Number(wuzilistnew[i].value))) {
            //					numRight = false;
            //					break;
            //				}
            if (Number(wuzilistnew[i].value) > 0) {
                aaaaaa.push(cc);
            }
        }
        //不常用
        // console.log("aa", aaaaaa);
        // console.log(wuziChoose);
        if (wuziChoose != null) {
            let is_push = true;
            for (var i = 0; i < wuziChoose.length; i++) {
                var applyNum = Number(wuzilistnewchoose[i].value);
                aaaaaa.map((item) => {
                    if (item.matNum == wuziChoose[i].matNum) {
                        item.applyNum += applyNum;
                        is_push = false;
                    }
                });
                if (is_push) {
                    var cc = {
                        matNum: wuziChoose[i].matNum,
                        matName: wuziChoose[i].matName,
                        matTypeName: wuziChoose[i].matTypeName,
                        matModel: wuziChoose[i].matModel,
                        matSpec: wuziChoose[i].matSpec,
                        unit: wuziChoose[i].unit,
                        unitName: wuziChoose[i].unitName,
                        applyNum: applyNum,
                    };
                    if (Number(wuzilistnewchoose[i].value) > 0) {
                        aaaaaa.push(cc);
                    }
                }
            }
        }

        // console.log(aaaaaa);
        //			if(!numRight) {
        //				showMsg("物品数量为正整数！");
        //				return;
        //			}
        if (aaaaaa.length == 0) {
            showMsg("请选择物资！");
            return;
        }
        $("#loading").show();
        var prames = {
            workNo: workNo,
            name: name,
            dataGroupCode: dataGroupCode,
            deptNum: deptNum,
            deptName: deptName,
            rows: aaaaaa,
            applySign: "app",
        };
        prames = JSON.stringify(prames);
        $ajax("insert", "MDSQ0101", prames, (res) => {
            console.log(res);
            if (res.status == "0") {
                removeSet();
                showMsg(res.msg);
                setTimeout('location.href="choose-main.html";', 2000);
            } else {
                $("#loading").hide();
                showMsg(res.msg);
            }
        });

        //			return;
    });
    //选择申请时间
    //		mui("body").on("tap", ".applyTime", function() {
    //			var options = {
    //				"type": "datetime",
    //				endDate: new Date() //设置结束日期
    //			};
    //			var applyTimepickerDate = new mui.DtPicker(options);
    //			applyTimepickerDate.show(function(rs) {
    //				$("#applyTime").val(rs.text);
    //			});
    //		});

    //选择交货日期
    mui("body").on("tap", ".askGive", function() {
        blurCancel();
        var options = {
            type: "date",
            beginDate: new Date(), //设置结束日期
        };
        var askGivepickerDate = new mui.DtPicker(options);
        askGivepickerDate.show(function(rs) {
            $("#askGive").val(rs.text);
        });
    });

    mui("body").on("tap", "#back", function() {
        removeSet();
        location.href = "choose-main.html";
    });
    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() {
        document.addEventListener("backbutton", onBackKeyDown, false);
    }

    function onBackKeyDown() {
        removeSet();
        location.href = "choose-main.html";
    }
    /*底部页面的切换*/
    mui("body").on("tap", ".my-plan", function() {
        removeSet();
        location.href = "plan-apply.html";
    });
    mui("body").on("tap", ".new-project", function() {
        removeSet();
        location.href = "new-apply.html";
    });
    mui("body").on("tap", ".dai-tijiao", function() {
        removeSet();
        location.href = "plan-submit.html";
    });
    mui("body").on("tap", ".add", function() {
        blurCancel();
        var jsonoBJn = {
            remark: $("#desc").val(),
        };

        var wuzilistnew = $(".wuzi-list-new input[class='numInput']");
        var aNewArr = [];
        for (var i = 0; i < wuzilistnew.length; i++) {
            var wocap = JSON.parse(wuzilistnew[i].id);
            wocap.applyNum = Number(wuzilistnew[i].value);
            aNewArr.push(wocap);
        }
        console.log(aNewArr);
        var wuzilistnewChoose = $(
            ".wuzi-list-new-choose input[class='numInput']"
        );
        var aNewArrChoose = [];
        if (wuziChoose == null) {
            wuziChoose = [];
        } else {
            for (var i = 0; i < wuzilistnewChoose.length; i++) {
                var wocap = JSON.parse(wuzilistnewChoose[i].id);
                wocap.applyNum = Number(wuzilistnewChoose[i].value);
                aNewArrChoose.push(wocap);
            }
        }
        console.log(aNewArrChoose);
        localStorage.setItem("wuzi-choose-info", JSON.stringify(jsonoBJn));
        localStorage.setItem("wuzi-choose-before", JSON.stringify(aNewArr));
        localStorage.setItem("wuzi-choose", JSON.stringify(aNewArrChoose));

        //			localStorage.setItem("wuzi-choose-info", JSON.stringify(jsonoBJn));
        //			localStorage.setItem("wuzi-choose-before", JSON.stringify(setArry));
        //			localStorage.setItem("wuzi-choose", JSON.stringify(wuziChoose));

        location.href = "wuzi-choose.html";
    });

    function removeSet() {
        localStorage.removeItem("wuzi-choose-info");
        localStorage.removeItem("wuzi-choose-before");
        localStorage.removeItem("wuzi-choose");
    }

    function blurCancel() {
        $("input").blur();
    }
</script>

</html>