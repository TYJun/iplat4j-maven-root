<!DOCTYPE html>
<html class="no-js">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="renderer" content="webkit" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="stylesheet" href="../../reference/mui/css/mui.min.css" />
    <!-- <link rel="stylesheet" href="" /> -->
</head>
<style type="text/css">
    #app {
        height: 100vh;
        background-color: #f5f5f5;
    }

    .content {
        /* margin-top: 102px; */
        position: relative;
        top: 66px;
        box-sizing: border-box;
        padding: 0px 16px 16px 16px;
        background-color: #f5f5f5;
    }

    .list {
        box-sizing: border-box;
        padding: 16px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0px 0px 10px 5px #f2f2f2;
        margin-bottom: 16px;
    }

    .list .title {
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-sizing: border-box;
        padding-bottom: 14px;
        border-bottom: 1px solid #f0f0f0;
    }

    .item {
        height: 28px;
        font-size: 16px;
        color: #333;
        line-height: 28px;
    }

    .bottom .item>span:first-child {
        /* color: #888; */
    }

    .meterialTitile {
        background-color: transparent;
        padding: 6px 0px;
        display: flex;
        align-items: center;
        font-size: 16px;
        color: #333;
        margin-bottom: 8px;
    }

    .meterialTitile .line {
        width: 6px;
        height: 20px;
        border-radius: 12px;
        background-color: #30c37c;

        margin-right: 8px;
    }
    .step {
        margin-bottom: 24px;
        /* display: flex; */
    }

    .step .left {
        width: 5%;
        position: relative;
    }

    .step .left .small_dot {
        width: 16px;
        height: 16px;
        background-color: #30c37c;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .small_dot>div {
        width: 10px;
        height: 10px;
        background-color: #fff;
        border-radius: 50%;
        position: relative;
        z-index: 12;
    }

    .step .right .top span {
        margin: 12px;
        font-size: 15px;
        color: #333;
    }

    .dot_line {
        width: 4px;
        height: 100px;
        background-color: #30c37c;
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
    }

    .approval_liu {
        margin-bottom: 24px;
        display: flex;
    }

    .approval_liu:last-child {
        margin-bottom: 0px;
    }

    .mui-btn-success {
        width: 100%;
        height: 40px;
        border-radius: 20px;
        font-size: 16px;
        background-color: #30c37c;
        border: 1px solid #30c37c !important;
        color: #fff;
    }

    .ApprovalComment {
        margin-bottom: 24px;
    }

    :checked:before {
        color: #30c37c !important;
    }

    .mui-radio input[type=radio] {
        position: absolute;
        top: 6px;
    }

    .mui-radio input[type=radio]:before {
        font-size: 26px;
    }
</style>

<body>
    <div id="app">
        <header class="mui-bar mui-bar-nav">
            <h1 class="mui-title">审批</h1>
            <button id="back" onclick="onBackKeyDown()" class="mui-btn mui-btn-blue mui-btn-link mui-btn-nav mui-pull-left">
                <span class="mui-icon mui-icon-left-nav"></span>
                返回
            </button>
        </header>
        <div class="content">
            <div class="list">
                <div class="title">
                    <div class="taskNo" style="color: #30c37c;font-size:17px;font-weight:600;">MPY22000000001</div>
                    <!-- <div class="status" style="color: #666;">待审批</div> -->
                </div>
                <div class="bottom" style="margin-top:16px;">
                    <!-- <div class="item"><span>科室：</span><span>物业管理科</span></div> -->
                    <div class="item"><span>采购总数：</span><span>123</span></div>
                    <div class="item"><span>采购总价：</span><span>2022</span></div>
                    <div class="item"><span>创建人：</span><span>234</span></div>
                    <div class="item"><span>创建时间：</span><span>201.50</span></div>
                    <!-- <div class="item"><span>备注：</span><span>备注一</span></div> -->
                </div>
            </div>
            <!--物资名称  -->
            <div class="meterialTitile">
                <div class="line"></div>
                <div>物资</div>
            </div>
            <div class="meterial">
                <div class="list">
                    <div class="item" style="display:flex;position: relative;"><span>物资名称：</span>
                    </div>
                    <div class="item"><span>物资分类：</span><span>年度</span></div>
                    <div class="item"><span>型号：</span><span>2022</span></div>
                    <div class="item"><span>单价(元)：</span><span>234</span></div>
                    <div class="item"><span>计划数量：</span>
                    </div>
                </div>
                <div class="list">
                    <div class="item" style="display:flex;position: relative;"><span>物资名称：</span>
                    </div>
                    <div class="item"><span>物资分类：</span><span>年度</span></div>
                    <div class="item"><span>型号：</span><span>2022</span></div>
                    <div class="item"><span>单价(元)：</span><span>234</span></div>
                    <div class="item"><span>计划数量：</span>
                    </div>
                </div>
            </div>
                <!-- 审批流 -->
                <div class="step">
                    <div class="meterialTitile">
                        <div class="line"></div>
                        <div>审批流</div>
                    </div>
                    <div id="step_info" style="background-color: #fff;border-radius: 8px;padding: 16px 1px 16px 16px;">
                        <div class="approval_liu">
                            <div class="left" style="display: flex;flex-direction: column; align-items:center;">
                                <div class="small_dot">
                                    <div></div>
                                </div>
                                <div class="dot_line"></div>
                            </div>
                            <div class="right">
                                <div class="top" style="margin-bottom: 4px;">
                                    <span>张怡</span><span>2022-9-7</span><span>同意</span></div>
                                <div class="top"><span>审批意见：可以</span></div>
                            </div>
                        </div>
                        <div class="approval_liu">
                            <div class="left" style="display: flex;flex-direction: column; align-items:center;">
                                <div class="small_dot">
                                    <div></div>
                                </div>
                            </div>
                            <div class="right">
                                <div class="top"><span>李思</span><span>2022-9-7</span><span>驳回</span></div>
                                <div class="top"><span>审批意见：驳回</span></div>
                            </div>
                        </div>
                        <div class="approval_liu">
                            <div class="left" style="display: flex;flex-direction: column; align-items:center;">
                                <div class="small_dot">
                                    <div></div>
                                </div>
                            </div>
                            <div class="right">
                                <div class="top"><span>陈一</span><span>2022-9-7</span><span>同意</span></div>
                                <div class="top"><span>审批意见：可以的哦</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            <!-- 审批意见 -->
            <div class="ApprovalComment" hidden>
                <div class="meterialTitile">
                    <div class="line"></div>
                    <div>审批</div>
                </div>
                <div style="background-color: #fff;border-radius: 8px;padding: 16px;">
                    <!-- 同意or驳回 -->
                    <div class="YesOrNo" style="display: flex;margin-bottom: 10px;">
                        <div class="mui-input-row mui-radio mui-left">
                            <label style="font-size: 16px;color:#333;">同意</label>
                            <input onchange="getYesChange()" id="yesApproval" name="radio1" type="radio">
                        </div>
                        <div class="mui-input-row mui-radio mui-left">
                            <label style="font-size: 16px;color:#333;">驳回</label>
                            <input name="radio1" onchange="getNoChange()" id="noApproval" type="radio">
                        </div>
                    </div>
                    <!-- 意见 -->
                    <div class="comment">
                        <textarea onfocus="getComment()" onblur="blurComment()" cols="5" rows="5"
                            style="padding: 8px;margin-bottom: 0px;font-size: 16px;color: #333;"></textarea>
                    </div>
                </div>
            </div>
            <div class="btn" style="margin: 48px 0px;">
                <!-- 审批按钮 -->
                <button type="button" onclick="toApproval()" class="mui-btn mui-btn-success">审批</button>
                <!-- 确认按钮 -->
                <button style="display: none;" onclick="toSure()" type="button"
                    class="mui-btn mui-btn-success">确认</button>
            </div>
        </div>



</body>
<script src="../../reference/js/jquery-2.1.4.js" type="text/javascript"></script>
<script type="text/javascript">
       var taskNo = decodeURI(location.href)
        .split("?")[1]
        .split("=")[1];

    // = taskNo
    document.getElementsByClassName('taskNo')[0].innerText = taskNo


    $(function () {
        // 审批默认同意
        document.getElementById('yesApproval').checked = true
        $('textarea').val('审批意见：同意')
         // 审批流样式
         let step_info = document.getElementById('step_info')
        console.log(step_info.lastElementChild);
        document.getElementsByClassName('dot_line')[0].style.height = step_info.offsetHeight - 16 - step_info.lastElementChild.offsetHeight + 'px'

    })
    function getComment() {
        if ($('textarea').val() == '审批意见：同意' || $('textarea').val() == '审批意见：驳回') {
            $('textarea').val('')
        }
    }
    function blurComment() {
        if ($('textarea').val() == '') {
            if (document.getElementById('yesApproval').checked == true) {
                $('textarea').val('审批意见：同意')
            } else {
                $('textarea').val('审批意见：驳回')
            }
        }
    }
    function getYesChange() {
        $('textarea').val('审批意见：同意')
    }
    function getNoChange() {
        $('textarea').val('审批意见：驳回')
    }
    // 审批
    function toApproval() {
        $('button').eq(1).css('display', 'none').siblings().css('display', '')
        $('.ApprovalComment').show()
        // console.log($('button').eq(0));
    }
    // 确认
    function toSure() {
        location.href ="./approval.html?from="+'approval'
        // $('button').eq(2).css('display', 'none').siblings().css('display', '')
    }
    // 返回
    function onBackKeyDown() {
        location.href = "./approval.html?from="+'approval2';
    }
</script>

</html>