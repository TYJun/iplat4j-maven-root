<!doctype html>
<html class="no-js">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no,viewport-fit=cover">
		<meta name="renderer" content="webkit">
		<meta http-equiv="Cache-Control" content="no-siteapp" />
		<meta name="format-detection" content="telephone=no" />
		<link rel="stylesheet" href="../../reference/bootstrap-3.3.5/css/bootstrap.css" />
		<link rel="stylesheet" href="../reference/mui/css/mui.min.css">
		<link rel="stylesheet" type="text/css" href="css/iconfont.css">
		<link rel="stylesheet" href="../reference/css/common.css" />
		<link rel="stylesheet" href="css/tcj-font.css" />
		<link rel="stylesheet" href="../reference/mui/css/mui.picker.min.css">

		<!--<link rel="stylesheet" href="../../css/detail.css">-->
	</head>
	<STYLE TYPE="text/css">
		body {
			background: #f5f5f5;
		}
		
		.task-div {
			width: 96%;
			margin: 10px auto;
			padding-left: 15px;
			padding-right: 15px;
			padding-top: 5px;
			padding-bottom: 5px;
			background: #fff;
			border-radius: 2px;
			box-shadow: 0px 2px 5px #d4d4d4;
		}
		
		.task-title {
			height: 40px;
			line-height: 40px;
			border-bottom: 1px solid #eee;
			font-weight: bold;
		}
		
		.status-applying {
			color: #ff9800;
		}
		
		.status-accept {
			color: #0dc515;
		}
		
		.status-remove {
			color: #f5675c;
		}
		
		.status-unknown {
			color: #f5675c;
		}
		
		.task-info {
			padding-top: 10px;
			color: #999999;
		}
		
		.word-omit {
			color: #333333;
		}
		
		.info-title {
			color: #5d5d5d;
		}
		
		.mui-table-view:before {
			background-color: #eee;
		}
		
		.mui-table-view:after {
			background-color: #eee;
		}
		
		.btn-div {
			width: 100%;
			text-align: right;
			border-top: 1px solid #eee;
			margin-top: 10px;
			padding-top: 10px;
			padding-bottom: 5px;
		}
		
		.btn-div button {
			margin-left: 10px;
		}
		
		.btn-views {
			width: 80px;
			border-radius: 15px;
			border: 1px solid #2aabd2;
			color: #2aabd2;
		}
		
		.title-deal {
			height: 40px;
			line-height: 40px;
			text-align: center;
			opacity: 0.77;
			font-size: 17px;
			float: left;
			width: 40%;
		}
		
		.mui-table-view:before {
			background-color: #eee;
		}
		
		.mui-table-view:after {
			background-color: #eee;
		}
		
		.no-views {
			text-align: center;
			margin-top: 280px;
			margin-left: -15px;
		}
		
		.printDetail {
			height: 32px;
			width: 25%;
			background: #2aabd2;
			text-align: center;
			line-height: 32px;
			border-radius: 10px;
			margin-top: 14px;
			color: #fff;
			box-shadow: 0 0 7px #2aabd2;
		}
		
		.apply-bottom {
			border-bottom: 1px solid #eee;
		}
		
		.apply-bottom:last-child {
			border-bottom: 0;
		}
		
		.apply-content1 {
			text-align: left;
			height: 35px;
			/*line-height: 47px;*/
			/*font-weight: lighter;*/
			color: #333;
			padding-top: 12PX;
			font-size: 15px;
		}
		
		.apply-content2 {
			text-align: left;
			min-height: 35px;
			/*font-weight: lighter;*/
			color: #333;
			font-size: 13px;
			margin-bottom: 4px;
		}
		
		.warn {
			color: #FFFFFF;
			background: rgba(0, 0, 0, 0.6);
			filter: progid:DXImageTransform.Microsoft.gradient(startcolorstr=#7F000000, endcolorstr=#7F000000);
			border-radius: 5px;
			padding: 5px;
			min-height: 30px;
			position: fixed;
			text-align: center;
			left: 10%;
			top: 55px;
			z-index: 3000;
			width: 80%;
		}
		
		.loading1 {
			position: fixed;
			z-index: 999;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;
		}
		
		.loading2 {
			margin: 0 auto;
			margin-top: 250px;
			text-align: center;
			line-height: 100px;
		}
		
		.wuzi-list-title {
			background: #fff;
			display: flex;
			height: 40px;
			line-height: 40px;
			border-bottom: 1px solid #ddd;
		}
		
		.shugang {
			display: inline-block;
			width: 5px;
			height: 20px;
			background: #2AABD2;
			margin: 10px 18px;
			border-radius: 15px;
		}
		
		.shugang-text {
			color: #444;
			font-weight: bold;
			font-size: 16px;
		}
		
		.mui-bar-nav~.mui-content .mui-pull-top-pocket {
			top: 0;
		}
		
		.quxiao {
			height: 32px;
			width: 21%;
			background: #fafafa;
			text-align: center;
			line-height: 32px;
			border-radius: 15px;
			margin-top: 14px;
			color: #a6a6a6;
		}
		
		.queding {
			height: 32px;
			width: 21%;
			background: #2aabd2;
			text-align: center;
			line-height: 32px;
			border-radius: 15px;
			margin-top: 14px;
			color: #fff;
		}
		
		.row-content {
			height: 40px;
			line-height: 40px;
			padding: 0 15px;
			border-bottom: 1px solid #EEEEEE;
			font-size: 14px;
			color: #666666;
			background: #ffffff;
		}
		
		.row-content1 {
			height: 30px;
			line-height: 30px;
			padding: 0 15px;
			font-size: 16px;
			color: #666666;
			background: #ffffff;
		}
		
		.row-right {
			text-align: right;
			color: #333333;
		}
		
		.new-icon-color {
			color: #aaa;
		}
		
		.new-row-tcj {
			height: 60px;
			line-height: 60px;
			display: flex;
			justify-content: space-between;
			font-size: 14px;
		}
		
		.diceng {
			position: fixed;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;
			z-index: 250;
			background: black;
			opacity: 0.5;
			display: none;
		}
		
		.realMoney {
			position: fixed;
			z-index: 251;
			width: 90%;
			left: 5%;
			top: 100px;
			/*bottom: 260px;*/
			background: #FFFFFF;
			display: none;
		}
		
		.setInput {
			color: #333333;
			width: 100%;
			border: 0;
			outline: none;
			text-align: left;
			font-size: 15px;
		}
		
		.editButtons {
			height: 40px;
			line-height: 40px;
			text-align: center;
			font-size: 19px;
			width: 90%;
			margin-left: 5%;
			margin-bottom: 30px;
			border-radius: 10px;
		}
		
		.applyTitle {
			height: 50px;
			line-height: 50px;
			border-bottom: 1px solid #e1e1e1;
			text-align: center;
			font-size: 20px;
			color: #666666;
		}
		
		.applyInput {
			padding: 8px 15px;
		}
		
		ul,
		li {
			padding: 0;
			margin: 0;
			list-style: none;
		}
		
		.applyInput ul {
			height: 250px;
			overflow-y: auto;
		}
		
		.applyInput li {
			text-align: center;
			height: 40px;
			line-height: 40px;
			border-bottom: 1px solid #f1f1f1;
		}
	</STYLE>

	<body>
		<header id="header" class="mui-bar mui-bar-nav">
			<h1 class="mui-title">运送历史列表</h1>
			<button onclick="location.href='main.html'" class="menu mui-btn mui-btn-link mui-btn-nav mui-pull-left">
            <span class="mui-icon mui-icon-left-nav"></span>首页
        </button>
			<!-- <button class="mui-btn mui-btn-link mui-pull-right">编辑</button> -->
		</header>

		<div id="warn" class="warn" hidden>
			<small></small>
		</div>

		<div id="loading" class="loading1" hidden="hidden">
			<div class="loading2">
				<span class="mui-spinner" style="width:80px;height:80px;"></span>
			</div>
		</div>
		<!--<div class="diceng"> </div>
		<div class="realMoney">
			<div class="applyTitle">楼号选择</div>
			<div class="applyInput">

				<div class="mui-row" style="padding: 0px 10px;border-bottom:1px  solid #F1f1f1;">
					<div class="mui-input-row mui-search">
						<input type="search" class="mui-input-clear" style="background-color: #FFF;margin-bottom: 10px;" placeholder="输入中文筛选" oninput="getNameNum(this.value)">
					</div>
				</div>
			</div>
			<div class="applyInput">
				<ul class="applyInputUl">

				</ul>

			</div>

		</div>-->
		<p class="no-views" style="">———&nbsp;&nbsp;暂无数据&nbsp;&nbsp;———</p>
		<div style="padding-top: 44px;">
			<div class="mui-row row-content">

				<div class="mui-col-sm-5 mui-col-xs-5">
					<span class="mui-icon   iconfont   icon-fenglei new-icon-color"></span> 开始时间：
				</div>
				<div class="mui-col-sm-7 mui-col-xs-7 row-right ">
					<input type="text" id="begintime" style="width: 80%;border:0;outline:none;font-size:14px;padding:0px;text-align:right;margin-bottom:0;height:21px;" placeholder="请选择开始时间" readonly="readonly" />
					<span class="mui-icon iconfont icon-youjiantou" style="color:#2aabd2;font-weight: bold;"></span>

				</div>
			</div>
			<div class="mui-row row-content">

				<div class="mui-col-sm-5 mui-col-xs-5">
					<span class="mui-icon   iconfont   icon-fenglei new-icon-color"></span> 截止时间：
				</div>
				<div class="mui-col-sm-7 mui-col-xs-7 row-right ">
					<input type="text" id="endtime" style="width: 80%;border:0;outline:none;font-size:14px;padding:0px;text-align:right;margin-bottom:0;height:21px;" placeholder="请选择截止时间" readonly="readonly" />
					<span class="mui-icon iconfont icon-youjiantou" style="color:#2aabd2;font-weight: bold;"></span>

				</div>
			</div>
			<div class="mui-row row-content">

				<div class="mui-col-sm-5 mui-col-xs-5">
					<span class="mui-icon   iconfont   icon-fenglei new-icon-color"></span> 分类：
				</div>
				<div class="mui-col-sm-7 mui-col-xs-7 row-right ">
					<input type="text" id="status" style="width: 80%;border:0;outline:none;font-size:14px;padding:0px;text-align:right;margin-bottom:0;height:21px;" placeholder="请选择状态" readonly="readonly" />
					<span class="mui-icon iconfont icon-youjiantou" style="color:#2aabd2;font-weight: bold;"></span>
					<input hidden="hidden" type="text" id="statusCode" style="width: 80%;border:0;outline:none;font-size:14px;padding:0px;text-align:right;margin-bottom:0;height:21px;" placeholder="请输入布草名称" onkeyup="this.value=this.value.replace(/^ +| +$/g,'')" />

				</div>
			</div>
			<div class="mui-row row-content">

				<div class="mui-col-sm-5 mui-col-xs-5">
					<span class="mui-icon  iconfont icon-mingcheng new-icon-color"></span> 科室：
				</div>
				<div class="mui-col-sm-7 mui-col-xs-7 row-right ">
					<input type="text" id="deptName" style="width: 80%;border:0;outline:none;font-size:14px;padding:0px;text-align:right;margin-bottom:0;height:21px;" placeholder="请选择或输入科室" readonly="readonly" />
					<span class="mui-icon iconfont icon-youjiantou" style="color:#2aabd2;font-weight: bold;"></span>
					<input hidden="hidden" type="text" id="deptCode" style="width: 80%;border:0;outline:none;font-size:14px;padding:0px;text-align:right;margin-bottom:0;height:21px;" placeholder="请输入布草名称" onkeyup="this.value=this.value.replace(/^ +| +$/g,'')" />

				</div>
			</div>
			<div class="mui-row row-content new-row-tcj">

				<div class="quxiao">重置</div>
				<div class="queding">查询</div>
			</div>

		</div>
		<div id="pullrefresh" class="mui-content mui-scroll-wrapper" style="margin-top: 274px;padding-bottom: 55px;padding-top: 0px;">
			<div class="mui-scroll">
				<ul class="mui-table-view mui-table-view-chevron" style="background-color:#eee;">
					<!--<div class="task-div">
						<div class="mui-row task-title">
							<div class="mui-col mui-col-xs-8 task-no">申请单号：212018393809</div>
							<div class="mui-col mui-col-xs-4 right status-applying">待完工</div>
						</div>
						<div class="task-content ">
							<div class="mui-row task-info">
								<div class="mui-col mui-col-xs-4">出发地</div>
								<div class="mui-col mui-col-xs-8 right word-omit">1706多功能会议室</div>
							</div>
							<div class="mui-row task-info">
								<div class="mui-col mui-col-xs-4">目的地</div>
								<div class="mui-col mui-col-xs-8 right word-omit">会议室</div>
							</div>
							<div class="mui-row task-info">
								<div class="mui-col mui-col-xs-4">使用人</div>
								<div class="mui-col mui-col-xs-8 right word-omit">总务处周列会</div>
							</div>
						</div>
						<div class="task-content ">
							<div class="mui-row task-info">
								<div class="mui-col mui-col-xs-4">用车时间</div>
								<div class="mui-col mui-col-xs-8 right word-omit">12</div>
							</div>
							<div class="mui-row task-info">
								<div class="mui-col mui-col-xs-4">申请事由</div>
								<div class="mui-col mui-col-xs-8 right word-omit">陈红</div>
							</div>
							<div class="mui-row task-info">
								<div class="mui-col mui-col-xs-4">预估费用</div>
								<div class="mui-col mui-col-xs-8 right word-omit">57712</div>
							</div>
							<div class="mui-row task-info">
								<div class="mui-col mui-col-xs-4">用车费用</div>
								<div class="mui-col mui-col-xs-8 right word-omit">总务处</div>
							</div>

						</div>
						<div class="btn-div">
							<button type="button" class="mui-btn mui-btn-outlined btn-views">预约</button>
							<button type="button" class="mui-btn mui-btn-outlined btn-views">预约</button>
						</div>
					</div>-->

				</ul>
			</div>
		</div>
		<!-- 选择底部-->
		<nav class="mui-bar mui-bar-tab" style="background-color:#fff;">
			<a id="home" class="mui-tab-item">
				<span class="mui-icon iconfont icon-dengji"></span>
				<span class="mui-tab-label">登记</span>
			</a>
			<a id="yunsong" class="mui-tab-item mui-active">
				<span class="mui-icon iconfont icon-building"></span>
				<span class="mui-tab-label">运送</span>
			</a>
			<a id="peijian" class="mui-tab-item">
				<span class="mui-icon iconfont icon-keshi"></span>
				<span class="mui-tab-label">陪检</span>
			</a>

		</nav>

	</body>
	<script src="../reference/mui/js/mui.min.js" type="text/javascript"></script>
	<script src="../reference/js/jquery-2.1.4.js" type="text/javascript"></script>
	<script src="../reference/js/common.js" type="text/javascript"></script>
	<script src="../reference/mui/js/mui.picker.min.js" type="text/javascript"></script>
	<!--<script src="../../cordova.js" type="text/javascript"></script>-->
	<script type="text/javascript">
		var baseUrl = localStorage.getItem("url");
		var workNo = localStorage.getItem("workNo");
		var page = 1;
		var taskListAppend = "";
		var collectPicker = new mui.PopPicker();
		var collectArr = [];
		var buildingArr = [];
		var buildingArrSelf = [];
				loadType();

		function loadType() {
			$.ajax({
				//				url: "../json/wuzi-choose.json",
				//				type: "get",
				url: baseUrl + "app_carriageAppController.do?queryHistoryStatusCode",
				type: "post",
				data: {},
				success: function(data) {
					console.log(data);
					var list = data.obj;
					for(var i = 0; i < list.length; i++) {
						var aa = {
							text: "",
							value: ""
						}
						aa.value = list[i].statusCode;
						aa.text = list[i].statusName;
						collectArr.push(aa);
					}
				}
			});
		}
		/*
		 *条件查询 
		 * */
		//确定  
		mui("body").on("tap", ".queding", function() {
			loadViews();
		});

		//取消	
		mui("body").on("tap", ".quxiao", function() {
			$("#begintime").val("");
			$("#endtime").val("");
			$("#status").val("");
			$("#statusCode").val("");
			$("#deptName").val("");
			$("#deptCode").val("");
		});
		mui("body").on('tap', '#status', function() {
			collectPicker.setData(collectArr);

			collectPicker.show(function(items) {
				console.log(items);
				$("#status").val(items[0].text);
				$("#statusCode").val(items[0].value);
			});
		});
		//选择交货日期
		mui("body").on("tap", "#begintime", function() {
			var options = {
				"type": "date"
				//,endDate: new Date() //设置结束日期 
			};
			var askGivepickerDate = new mui.DtPicker(options);
			askGivepickerDate.show(function(rs) {
				$("#begintime").val(rs.text);
			});
		});
		mui("body").on("tap", "#endtime", function() {
			var options = {
				"type": "date"
				//,endDate: new Date() //设置结束日期 
			};
			var askGivepickerDate = new mui.DtPicker(options);
			askGivepickerDate.show(function(rs) {
				$("#endtime").val(rs.text);
			});
		});
		/*
		 * 楼层科室选择
		 * */
		mui("body").on("tap", "#deptName", function() {
			showSearch();
		});
		//显示楼层科室模糊查询框
		function showSearch() {

			$(".applyTitle").text("楼号选择");
			showBuilding();
			$(".diceng").show();
			$(".realMoney").show();
		}

		function showBuilding() {
			$.ajax({
				url: baseUrl + "app_callbackController.do?getBuildingInfo",
				type: "post",
				data: {
					multiCode: multiCode
				},
				success: function(data) {
					var data = eval("(" + data + ")");
					if(data.success) {
						buildingArr = data.obj;
						buildingArrSelf = data.obj;
						createBuilding();
					} else {
						mui.toast(data.msg);
						hideSearch();
					}
				}
			});

		}

		function hideSearch() {
			$("input[type=search]").val("");
			$(".diceng").hide();
			$(".realMoney").hide();
		}

		function createBuilding() {
			var taskList = "";

			for(var i = 0; i < buildingArrSelf.length; i++) {
				var jsonObj = {
					"building": buildingArrSelf[i].building,
					"buildingCode": buildingArrSelf[i].buildingCode
				}

				var jsonString = JSON.stringify(jsonObj);
				taskList += '<li  id=\'' + jsonString + '\' class="buildingLi">' + buildingArrSelf[i].building + '</li>';
			}
			$(".applyInputUl").html(taskList);
		}
		mui("body").on("tap", ".buildingLi", function() {
			var _this = JSON.parse(this.id);
			nullFloor();
			nullDept();
			hideSearch();
			$("#deptName").val(_this.building);
			$("#deptCode").val(_this.buildingCode);
		});

		function loadViews() {
			//			$("#loading").show();
			$.ajax({
				url: baseUrl + 'app_carriageAppController.do?queryCurrentTaskListAndItemHistory',
				type: 'post',
				data: {
					page: page,
					rows: 10,
					currentUser: workNo,
					beginTime: $("#begintime").val(),
					endTime: $("#endtime").val(),
					deptCode: $("#deptCode").val(),
					statusCode: $("#statusCode").val()
				},
				success: function(data) {
					$("#loading").hide();
					console.log(data);

					var array = new Array();
					if(data.respCode == 200) {

						var list = data.obj;
						if(list.length == 0 && page == 1) {
							$(".no-views").css("display", "");
						} else {
							$(".no-views").css("display", "none");
						}
						for(var i = 0; i < list.length; i++) {
							var status_code = list[i].status_code;
							var billNo = list[i].billNo;
							var createCateView = list[i].createCateView;
							var from_address = list[i].from_address;
							var from_dept_name = list[i].from_dept_name;
							var id = list[i].id;
							var status_code = list[i].status_code;
							var status_name = list[i].status_name;
							var execute_user_name = list[i].execute_user_name;
							var has_doctor = list[i].has_doctor;
							var transport_means_class_name = list[i].transport_means_class_name;
							var urgent = list[i].urgent;
							var viewDeptName = list[i].viewDeptName;
							var patient_name = list[i].patient_name;
							var patient_bed = list[i].patient_bed;
							var billDesc = list[i].billDesc; //备注
							var urgent = list[i].urgent; //是否加急
							var hideInfo = list[i].itemInfo.Y;
							var showInfo = list[i].itemInfo.N;
							var index = i + 1;
							taskListAppend += taskList(urgent, billDesc, index, viewDeptName, createCateView, status_code, billNo, from_address, from_dept_name, id, status_code, status_name, patient_name, execute_user_name, transport_means_class_name, patient_bed, showInfo, hideInfo);
						}
						$('ul').html(taskListAppend);
					}
				}
			});
		}

		function taskList(urgent, billDesc, index, viewDeptName, createCateView, status_code, billNo, from_address, from_dept_name, id, status_code, status_name, patient_name, execute_user_name, transport_means_class_name, patient_bed, showInfo, hideInfo) {
			var html = "";
			html += "<div id='div-child' class='panel panel-danger' style='margin-bottom:10px;border:1px solid #DEDEDE;padding:0 5px;'>";
			html += "<div style='margin-bottom:10px;border:none;'>";
			html += "<div id='panel-heading' class='row' style='background:#FFF;border:none;font-size:17px;padding-top:10px;border-bottom:none;'>";
			html += "<div id='rowss1' taskIds='" + id + "' class='col-xs-6 col-sm-6 col-md-6 col-lg-6' style='padding-top:4px;'>";
			html += "<span class='detail' style='color:#007AFF;'>" + createCateView + "</span></div>";
			html += "<div class='col-xs-6 col-sm-6 col-md-6 col-lg-6 right'>";
			if(status_code == '04') {
				html += "<span style='display:inline-block;padding-top:4px;padding-right:8px;color:#0090BB;'>" + status_name + "</span>";
			} else {
				html += "<span style='display:inline-block;padding-top:4px;padding-right:8px;color:#F5A224;'>" + status_name + "</span>";
			}
			html += "</div></div>";
			html += "<div class='panel-bodys' taskIds='" + id + "' style='border-bottom:none;border-top:none;'>";
			html += "<div class='row' style='padding-top:8px;font-size:17px;'>";

			if(urgent != "") {
				html += "<div class='col-xs-12 col-sm-12 col-md-12 col-lg-12' style='font-size:17px;color:#e4134b;'>" + from_address + "</div>";
			} else {
				html += "<div class='col-xs-12 col-sm-12 col-md-12 col-lg-12' style='font-size:17px;color:#007AFF;'>" + from_address + "</div>";
			}

			html += "</div></div></div>";

			//******************
			html += "<div  style='border-bottom:none;border-top:none;'>";
			html += "<div class='row' style='font-size:17px; '>";
			if(billDesc != "") {

				html += "<span class='col-xs-8 col-sm-8 col-md-8 col-lg-8 font-grey'>备注:" + billDesc + "</span>";
			} else {
				html += "<span class='col-xs-8 col-sm-8 col-md-8 col-lg-8 font-grey'>备注:无</span>";
			}
			if(patient_name != "") {
				html += "<span class='col-xs-4 col-sm-4 col-md-4 col-lg-4 font-grey'>" + patient_name + "</span>";
			} else {
				html += "<span class='col-xs-4 col-sm-4 col-md-4 col-lg-4 font-grey'></span>";
			}
			html += "</div></div>";

			//待完成内容

			if(showInfo.length > 0) {
				html += '<div class="wuzi-list-title showTitle">';
				html += '<span class="shugang"></span>';
				html += '<span class="shugang-text">待完成项目</span>';
				html += '</div>';
				html += "<div  class='showContent' >";
				for(var a = 0; a < showInfo.length; a++) {
					var jsonSelf = {
						"taskId": id,
						"id": showInfo[a].id,
					}
					var jsonString = JSON.stringify(jsonSelf)
					html += '<div class="mui-row   apply-bottom">';
					html += '<div class="mui-col-sm-1 mui-col-xs-1" style="line-height: 45px;">' + (a + 1) + '.</div>';
					html += '<div class="mui-col-sm-6 mui-col-xs-6">';
					html += '<div class="apply-content1">' + showInfo[a].dected_class_name + '</div>';
					html += '<div class="apply-content2" >检查地点&nbsp;&nbsp;' + showInfo[a].to_address_content + '</div>';
					html += '</div>';
					html += '<div class="mui-col-sm-5 mui-col-xs-5">';
					html += '<div class="apply-content1" style="text-align: center;">' + showInfo[a].dected_time + '</div>';
					html += '<div class="apply-content2">';
					html += '	</div>';
					html += '</div>';
					html += '</div>';

				}

				html += "</div>";
			}
			//完成内容

			if(hideInfo.length > 0) {

				html += '<div class="wuzi-list-title  hideTitle">';
				html += '<span class="shugang"></span>';
				html += '<span class="shugang-text">已完成项目</span>';
				html += '</div>';
				html += "<div  class='hideContent' style='display:none;' >";
				for(var a = 0; a < hideInfo.length; a++) {
					var jsonSelf1 = {
						"taskId": id,
						"id": hideInfo[a].id,
					}
					var jsonString1 = JSON.stringify(jsonSelf1)
					html += '<div class="mui-row ">';
					html += '<div class="mui-col-sm-1 mui-col-xs-1" style="line-height: 45px;">' + (a + 1) + '.</div>';
					html += '<div class="mui-col-sm-6 mui-col-xs-6">';
					html += '<div class="apply-content1">' + hideInfo[a].dected_class_name + '</div>';
					html += '<div class="apply-content2" >检查地点&nbsp;&nbsp;' + hideInfo[a].to_address_content + '</div>';
					html += '</div>';
					html += '<div class="mui-col-sm-5 mui-col-xs-5">';
					html += '<div class="apply-content1" style="text-align: center;">' + hideInfo[a].dected_time + '</div>';
					html += '<div class="apply-content2">';
					html += '	</div>';
					html += '</div>';
					html += '</div>';

				}

				html += "</div>";
			}
			html += "</div>";
			//***********

			return html;
		}

		//完成和待完成搞得显示和隐藏

		mui('body').on('tap', '.showTitle', function() {
			$(this).parent().find(".showContent").slideToggle();
		});
		mui('body').on('tap', '.hideTitle', function() {
			$(this).parent().find(".hideContent").slideToggle();
		});

		// 页面跳转
		mui('body').on('tap', '#home', function() {
			location.href = 'main.html';
		})
		mui('body').on('tap', '#yunsong', function() {
			location.reload();
		})
		mui('body').on('tap', '#peijian', function() {
			location.href = 'peijianList.html';
		})
		/**
		 * 下滑刷新
		 * @return {[type]} [description]
		 */
		function pulldownRefresh() {
			setTimeout(function() {
				taskListAppend = "";
				page = 1;
				loadViews();
				mui('#pullrefresh').pullRefresh().endPulldownToRefresh();
			}, 1500);
		}

		/**
		 * 上滑加载更多
		 * @return {[type]} [description]
		 */
		function pullupRefresh() {
			page++;
			loadViews();
			setTimeout(function() {
				//关闭加载框
				mui('#pullrefresh').pullRefresh().endPullupToRefresh();
			}, 1500);
		}

		mui.init({
			pullRefresh: {
				container: '#pullrefresh',
				down: {
					callback: pulldownRefresh,
					contentrefresh: "正在刷新",
				},
				up: {
					contentrefresh: "加载中，请稍后",
					contentnomore: '暂无更多数据',
					callback: pullupRefresh
				}
			}
		});

		document.addEventListener("deviceready", onDeviceReady, false);

		function onDeviceReady() {

			/**
			 * 系统返回键监听
			 */
			document.addEventListener("backbutton", onBackKeyDown, false);
		}

		/**
		 * 系统返回键方法
		 * @return {[type]} [description]
		 */
		function onBackKeyDown() {
			history.back(-1)
		}
	</script>

</html>