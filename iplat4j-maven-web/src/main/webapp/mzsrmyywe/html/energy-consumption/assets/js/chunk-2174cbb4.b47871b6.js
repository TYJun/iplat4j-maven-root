(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2174cbb4"],{4983:function(e,t,i){},"78eb":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n={inject:{vanField:{default:null}},watch:{value:function(){var e=this.vanField;e&&(e.resetValidation(),e.validateWithTrigger("onChange"))}},created:function(){var e=this.vanField;e&&!e.children&&(e.children=this)}}},7975:function(e,t,i){"use strict";i.r(t),i("68ef"),i("a71a"),i("9d70"),i("3743"),i("09fe"),i("4d75"),i("e3b3"),i("8270"),i("786d"),i("504b"),i("bcd3"),i("a9e3"),i("b0c0"),i("fb6a"),i("d3b7"),i("3ca3"),i("ddb0"),i("d81d"),i("159b"),i("99af"),i("a434"),i("4de4"),i("e260"),i("e6cf");var o=i("c31d"),n=i("d282"),a=i("ea8e"),r=i("a142");function s(e){return Array.isArray(e)?e:[e]}function l(i,n){return new Promise(function(t){var e;"file"!==n?((e=new FileReader).onload=function(e){t(e.target.result)},"dataUrl"===n?e.readAsDataURL(i):"text"===n&&e.readAsText(i)):t(null)})}function c(e,t){return s(e).some(function(e){return!!e&&(Object(r.d)(t)?t(e):e.size>t)})}i("ac1f"),i("00b4");var u=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function d(e){return!!e.isImage||(e.file&&e.file.type?0===e.file.type.indexOf("image"):e.url?(t=e.url,u.test(t)):!!e.content&&0===e.content.indexOf("data:image"));var t}var f=i("78eb"),h=i("ad06"),p=i("44bf"),v=i("543e"),g=i("28a2"),m=Object(n.a)("uploader"),n=m[0],b=m[1],w=n({inheritAttrs:!1,mixins:[f.a],model:{prop:"fileList"},props:{disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,uploadText:String,afterRead:Function,beforeRead:Function,beforeDelete:Function,previewSize:[Number,String],previewOptions:Object,name:{type:[Number,String],default:""},accept:{type:String,default:"image/*"},fileList:{type:Array,default:function(){return[]}},maxSize:{type:[Number,String,Function],default:Number.MAX_VALUE},maxCount:{type:[Number,String],default:Number.MAX_VALUE},deletable:{type:Boolean,default:!0},showUpload:{type:Boolean,default:!0},previewImage:{type:Boolean,default:!0},previewFullImage:{type:Boolean,default:!0},imageFit:{type:String,default:"cover"},resultType:{type:String,default:"dataUrl"},uploadIcon:{type:String,default:"photograph"}},computed:{previewSizeWithUnit:function(){return Object(a.a)(this.previewSize)},value:function(){return this.fileList}},methods:{getDetail:function(e){return void 0===e&&(e=this.fileList.length),{name:this.name,index:e}},onChange:function(e){var t=this,i=e.target.files;if(!this.disabled&&i.length){if(i=1===i.length?i[0]:[].slice.call(i),this.beforeRead){e=this.beforeRead(i,this.getDetail());if(!e)return void this.resetInput();if(Object(r.f)(e))return void e.then(function(e){e?t.readFile(e):t.readFile(i)}).catch(this.resetInput)}this.readFile(i)}},readFile:function(n){var e,a=this,r=c(n,this.maxSize);Array.isArray(n)?(e=this.maxCount-this.fileList.length,n.length>e&&(n=n.slice(0,e)),Promise.all(n.map(function(e){return l(e,a.resultType)})).then(function(i){var e=n.map(function(e,t){e={file:e,status:"",message:""};return i[t]&&(e.content=i[t]),e});a.onAfterRead(e,r)})):l(n,this.resultType).then(function(e){var t={file:n,status:"",message:""};e&&(t.content=e),a.onAfterRead(t,r)})},onAfterRead:function(e,t){var i=this;this.resetInput();var n,a=e;t&&(n=e,Array.isArray(e)?(n=[],a=[],e.forEach(function(e){e.file&&(c(e.file,i.maxSize)?n:a).push(e)})):a=null,this.$emit("oversize",n,this.getDetail())),(Array.isArray(a)?Boolean(a.length):Boolean(a))&&(this.$emit("input",[].concat(this.fileList,s(a))),this.afterRead&&this.afterRead(a,this.getDetail()))},onDelete:function(e,t){var i=this,n=null!=(n=e.beforeDelete)?n:this.beforeDelete;if(n){n=n(e,this.getDetail(t));if(!n)return;if(Object(r.f)(n))return void n.then(function(){i.deleteFile(e,t)}).catch(r.h)}this.deleteFile(e,t)},deleteFile:function(e,t){var i=this.fileList.slice(0);i.splice(t,1),this.$emit("input",i),this.$emit("delete",e,this.getDetail(t))},resetInput:function(){this.$refs.input&&(this.$refs.input.value="")},onClickUpload:function(e){this.$emit("click-upload",e)},onPreviewImage:function(e){var t,i,n=this;this.previewFullImage&&(i=(t=this.fileList.filter(d)).map(function(e){return e.content||e.url}),this.imagePreview=Object(g.a)(Object(o.a)({images:i,startPosition:t.indexOf(e),onClose:function(){n.$emit("close-preview")}},this.previewOptions)))},closeImagePreview:function(){this.imagePreview&&this.imagePreview.close()},chooseFile:function(){this.disabled||this.$refs.input&&this.$refs.input.click()},genPreviewMask:function(e){var t=this.$createElement,i=e.status,n=e.message;if("uploading"===i||"failed"===i){e="failed"===i?t(h.a,{attrs:{name:"close"},class:b("mask-icon")}):t(v.a,{class:b("loading")}),i=Object(r.c)(n)&&""!==n;return t("div",{class:b("mask")},[e,i&&t("div",{class:b("mask-message")},[n])])}},genPreviewItem:function(t,i){var n=this,e=this.$createElement,a=null!=(l=t.deletable)?l:this.deletable,r="uploading"!==t.status&&a&&e("div",{class:b("preview-delete"),on:{click:function(e){e.stopPropagation(),n.onDelete(t,i)}}},[e(h.a,{attrs:{name:"cross"},class:b("preview-delete-icon")})]),s=this.slots("preview-cover",Object(o.a)({index:i},t)),l=s&&e("div",{class:b("preview-cover")},[s]),s=null!=(a=t.previewSize)?a:this.previewSize,a=null!=(a=t.imageFit)?a:this.imageFit,l=d(t)?e(p.a,{attrs:{fit:a,src:t.content||t.url,width:s,height:s,lazyLoad:this.lazyLoad},class:b("preview-image"),on:{click:function(){n.onPreviewImage(t)}}},[l]):e("div",{class:b("file"),style:{width:this.previewSizeWithUnit,height:this.previewSizeWithUnit}},[e(h.a,{class:b("file-icon"),attrs:{name:"description"}}),e("div",{class:[b("file-name"),"van-ellipsis"]},[t.file?t.file.name:t.url]),l]);return e("div",{class:b("preview"),on:{click:function(){n.$emit("click-preview",t,n.getDetail(i))}}},[l,this.genPreviewMask(t),r])},genPreviewList:function(){if(this.previewImage)return this.fileList.map(this.genPreviewItem)},genUpload:function(){var e=this.$createElement;if(!(this.fileList.length>=this.maxCount)&&this.showUpload){var t,i=this.slots(),n=this.readonly?null:e("input",{attrs:Object(o.a)({},this.$attrs,{type:"file",accept:this.accept,disabled:this.disabled}),ref:"input",class:b("input"),on:{change:this.onChange}});return i?e("div",{class:b("input-wrapper"),key:"input-wrapper",on:{click:this.onClickUpload}},[i,n]):(this.previewSize&&(t={width:t=this.previewSizeWithUnit,height:t}),e("div",{class:b("upload",{readonly:this.readonly}),style:t,on:{click:this.onClickUpload}},[e(h.a,{attrs:{name:this.uploadIcon},class:b("upload-icon")}),this.uploadText&&e("span",{class:b("upload-text")},[this.uploadText]),n]))}}},render:function(){var e=arguments[0];return e("div",{class:b()},[e("div",{class:b("wrapper",{disabled:this.disabled})},[this.genPreviewList(),this.genUpload()])])}}),f=i("2638"),y=i.n(f),S=i("5530"),f=(i("c241"),{name:"global-van-uploader",props:{afterRead:{type:Function,default:function(){}},fileList:{type:Array,default:function(){return[]}},maxCount:{type:Number,default:10},capture:{type:String|Boolean,default:""},multiple:{type:Boolean,default:!1},scopedSlots:{type:Object,default:function(){return{}}}},render:function(e){var t=this;return e(w,y()([{ref:"uploader"},{attrs:Object(S.a)({},this.attrs)},{scopedSlots:{default:function(e){return t.scopedSlots.default(e)},"preview-cover":function(e){return t.scopedSlots.previewCover(e)}}},{on:this.$listeners}]))},computed:{attrs:function(){return Object(S.a)(Object(S.a)({},this.$attrs),this.$props)}},inheritAttrs:!1,data:function(){return{}}}),i=i("2877"),f=Object(i.a)(f,void 0,void 0,!1,null,"8754bcfe",null);t.default=f.exports},bcd3:function(e,t,i){},c241:function(e,t,i){i("a29f"),i("8a5a"),i("0607"),i("949e"),i("e60f"),i("f251"),i("7565"),i("589d"),i("9415"),i("5e76"),i("4983")}}]);