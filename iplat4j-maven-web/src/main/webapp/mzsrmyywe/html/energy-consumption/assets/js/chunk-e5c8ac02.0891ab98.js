(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e5c8ac02"],{"1b10":function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s}),n("a9e3");var i=44,s={title:String,loading:Boolean,readonly:Boolean,itemHeight:[Number,String],showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,allowHtml:{type:Boolean,default:!0},visibleItemCount:{type:[Number,String],default:6},swipeDuration:{type:[Number,String],default:1e3}}},"5b4d":function(t,e,n){n("a29f"),n("7565"),n("911e")},"911e":function(t,e,n){},a457:function(t,e,n){"use strict";n.r(e),n("68ef"),n("e3b3"),n("a526");var i=n("f253"),s=n("2638"),o=n.n(s),a=n("5530"),s=(n("5b4d"),{name:"global-van-picker",props:{title:{type:String,default:"标题"},showToolbar:{type:Boolean,default:!1}},render:function(){var t=arguments[0];return t(i.a,o()([{ref:"picker"},{attrs:Object(a.a)({},this.attrs)},{},{on:this.$listeners}]),[t("template",{slot:"cancel"},[this.$slots.cancel])])},inheritAttrs:!1,computed:{attrs:function(){return Object(a.a)(Object(a.a)({},this.$attrs),this.$props)}},data:function(){return{}}}),n=n("2877"),s=Object(n.a)(s,void 0,void 0,!1,null,"311159ba",null);e.default=s.exports},a526:function(t,e,n){},f253:function(t,e,n){"use strict";n("a9e3"),n("d3b7"),n("ddb0"),n("d81d"),n("159b"),n("e260");var i=n("c31d"),s=n("d282"),o=n("1325"),a=n("b1d2"),r=n("1b10"),u=n("ea8e"),h=n("543e"),c=(n("ac1f"),n("1276"),n("fb6a"),n("a434"),n("e9c4"),n("2638")),l=n.n(c),f=n("53ca"),d=(n("b64b"),n("a142"));function m(e){if(!Object(d.c)(e))return e;if(Array.isArray(e))return e.map(m);if("object"!==Object(f.a)(e))return e;var n={};return Object.keys(e).forEach(function(t){n[t]=m(e[t])}),n}var g=n("482d"),p=n("3875"),c=Object(s.a)("picker-column"),n=c[0],b=c[1];function v(t){t=window.getComputedStyle(t),t=t.transform||t.webkitTransform,t=t.slice(7,t.length-1).split(", ")[5];return Number(t)}function x(t){return Object(d.e)(t)&&t.disabled}var y=d.b&&"onwheel"in window,O=null,C=n({mixins:[p.a],props:{valueKey:String,readonly:Boolean,allowHtml:Boolean,className:String,itemHeight:Number,defaultIndex:Number,swipeDuration:[Number,String],visibleItemCount:[Number,String],initialOptions:{type:Array,default:function(){return[]}}},data:function(){return{offset:0,duration:0,options:m(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},mounted:function(){this.bindTouchEvent(this.$el),y&&Object(o.b)(this.$el,"wheel",this.onMouseWheel,!1)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1),y&&Object(o.a)(this.$el,"wheel")},watch:{initialOptions:"setOptions",defaultIndex:function(t){this.setIndex(t)}},computed:{count:function(){return this.options.length},baseOffset:function(){return this.itemHeight*(this.visibleItemCount-1)/2}},methods:{setOptions:function(t){JSON.stringify(t)!==JSON.stringify(this.options)&&(this.options=m(t),this.setIndex(this.defaultIndex))},onTouchStart:function(t){this.readonly||(this.touchStart(t),this.moving&&(t=v(this.$refs.wrapper),this.offset=Math.min(0,t-this.baseOffset)),this.startOffset=this.offset,this.duration=0,this.transitionEndTrigger=null,this.touchStartTime=Date.now(),this.momentumOffset=this.startOffset)},onTouchMove:function(t){this.readonly||(this.touchMove(t),"vertical"===this.direction&&(this.moving=!0,Object(o.c)(t,!0)),this.offset=Object(g.b)(this.startOffset+this.deltaY,-this.count*this.itemHeight,this.itemHeight),300<(t=Date.now())-this.touchStartTime&&(this.touchStartTime=t,this.momentumOffset=this.offset))},onTouchEnd:function(){var t,e,n=this;this.readonly||(t=this.offset-this.momentumOffset,(e=Date.now()-this.touchStartTime)<300&&15<Math.abs(t)?this.momentum(t,e):(e=this.getIndexByOffset(this.offset),this.duration=200,this.setIndex(e,!0),setTimeout(function(){n.moving=!1},0)))},onMouseWheel:function(t){var e,n=this;this.readonly||(Object(o.c)(t,!0),e=v(this.$refs.wrapper),this.startOffset=Math.min(0,e-this.baseOffset),this.momentumOffset=this.startOffset,this.transitionEndTrigger=null,t=t.deltaY,0===this.startOffset&&t<0||(t=-t,this.offset=Object(g.b)(this.startOffset+t,-this.count*this.itemHeight,this.itemHeight),O&&clearTimeout(O),O=setTimeout(function(){n.onTouchEnd(),n.touchStartTime=0},300)))},onTransitionEnd:function(){this.stopMomentum()},onClickItem:function(t){this.moving||this.readonly||(this.transitionEndTrigger=null,this.duration=200,this.setIndex(t,!0))},adjustIndex:function(t){for(var e=t=Object(g.b)(t,0,this.count);e<this.count;e++)if(!x(this.options[e]))return e;for(var n=t-1;0<=n;n--)if(!x(this.options[n]))return n},getOptionText:function(t){return Object(d.e)(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,e){function n(){t!==i.currentIndex&&(i.currentIndex=t,e&&i.$emit("change",t))}var i=this,s=-(t=this.adjustIndex(t)||0)*this.itemHeight;this.moving&&s!==this.offset?this.transitionEndTrigger=n:n(),this.offset=s},setValue:function(t){for(var e=this.options,n=0;n<e.length;n++)if(this.getOptionText(e[n])===t)return this.setIndex(n)},getValue:function(){return this.options[this.currentIndex]},getIndexByOffset:function(t){return Object(g.b)(Math.round(-t/this.itemHeight),0,this.count-1)},momentum:function(t,e){e=Math.abs(t/e);t=this.offset+e/.003*(t<0?-1:1);t=this.getIndexByOffset(t);this.duration=+this.swipeDuration,this.setIndex(t,!0)},stopMomentum:function(){this.moving=!1,this.duration=0,this.transitionEndTrigger&&(this.transitionEndTrigger(),this.transitionEndTrigger=null)},genOptions:function(){var o=this,a=this.$createElement,r={height:this.itemHeight+"px"};return this.options.map(function(t,e){var n=o.getOptionText(t),i=x(t),s={style:r,attrs:{role:"button",tabindex:i?-1:0},class:[b("item",{disabled:i,selected:e===o.currentIndex})],on:{click:function(){o.onClickItem(e)}}},i={class:"van-ellipsis",domProps:((i={})[o.allowHtml?"innerHTML":"textContent"]=n,i)};return a("li",l()([{},s]),[o.slots("option",t)||a("div",l()([{},i]))])})}},render:function(){var t=arguments[0],e={transform:"translate3d(0, "+(this.offset+this.baseOffset)+"px, 0)",transitionDuration:this.duration+"ms",transitionProperty:this.duration?"all":"none"};return t("div",{class:[b(),this.className]},[t("ul",{ref:"wrapper",style:e,class:b("wrapper"),on:{transitionend:this.onTransitionEnd}},[this.genOptions()])])}}),p=Object(s.a)("picker"),s=p[0],I=p[1],T=p[2];e.a=s({props:Object(i.a)({},r.b,{defaultIndex:{type:[Number,String],default:0},columns:{type:Array,default:function(){return[]}},toolbarPosition:{type:String,default:"top"},valueKey:{type:String,default:"text"}}),data:function(){return{children:[],formattedColumns:[]}},computed:{itemPxHeight:function(){return this.itemHeight?Object(u.b)(this.itemHeight):r.a},dataType:function(){var t=this.columns[0]||{};return t.children?"cascade":t.values?"object":"text"}},watch:{columns:{handler:"format",immediate:!0}},methods:{format:function(){var t=this.columns,e=this.dataType;"text"===e?this.formattedColumns=[{values:t}]:"cascade"===e?this.formatCascade():this.formattedColumns=t},formatCascade:function(){for(var t=[],e={children:this.columns};e&&e.children;){for(var n,i=e.children,s=null!=(n=e.defaultIndex)?n:+this.defaultIndex;i[s]&&i[s].disabled;){if(!(s<i.length-1)){s=0;break}s++}t.push({values:e.children,className:e.className,defaultIndex:s}),e=i[s]}this.formattedColumns=t},emit:function(t){var e,n=this;"text"===this.dataType?this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0)):(e=this.getValues(),"cascade"===this.dataType&&(e=e.map(function(t){return t[n.valueKey]})),this.$emit(t,e,this.getIndexes()))},onCascadeChange:function(t){for(var e={children:this.columns},n=this.getIndexes(),i=0;i<=t;i++)e=e.children[n[i]];for(;e&&e.children;)this.setColumnValues(++t,e.children),e=e.children[e.defaultIndex||0]},onChange:function(t){var e,n=this;"cascade"===this.dataType&&this.onCascadeChange(t),"text"===this.dataType?this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0)):(e=this.getValues(),"cascade"===this.dataType&&(e=e.map(function(t){return t[n.valueKey]})),this.$emit("change",this,e,t))},getColumn:function(t){return this.children[t]},getColumnValue:function(t){t=this.getColumn(t);return t&&t.getValue()},setColumnValue:function(t,e){var n=this.getColumn(t);n&&(n.setValue(e),"cascade"===this.dataType&&this.onCascadeChange(t))},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var n=this.getColumn(t);n&&(n.setIndex(e),"cascade"===this.dataType&&this.onCascadeChange(t))},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){t=this.children[t];t&&t.setOptions(e)},getValues:function(){return this.children.map(function(t){return t.getValue()})},setValues:function(t){var n=this;t.forEach(function(t,e){n.setColumnValue(e,t)})},getIndexes:function(){return this.children.map(function(t){return t.currentIndex})},setIndexes:function(t){var n=this;t.forEach(function(t,e){n.setColumnIndex(e,t)})},confirm:function(){this.children.forEach(function(t){return t.stopMomentum()}),this.emit("confirm")},cancel:function(){this.emit("cancel")},genTitle:function(){var t=this.$createElement;return this.slots("title")||(this.title?t("div",{class:["van-ellipsis",I("title")]},[this.title]):void 0)},genCancel:function(){return(0,this.$createElement)("button",{attrs:{type:"button"},class:I("cancel"),on:{click:this.cancel}},[this.slots("cancel")||this.cancelButtonText||T("cancel")])},genConfirm:function(){return(0,this.$createElement)("button",{attrs:{type:"button"},class:I("confirm"),on:{click:this.confirm}},[this.slots("confirm")||this.confirmButtonText||T("confirm")])},genToolbar:function(){var t=this.$createElement;if(this.showToolbar)return t("div",{class:I("toolbar")},[this.slots()||[this.genCancel(),this.genTitle(),this.genConfirm()]])},genColumns:function(){var t=this.$createElement,e=this.itemPxHeight,n=e*this.visibleItemCount,i={height:e+"px"},s={height:n+"px"},e={backgroundSize:"100% "+(n-e)/2+"px"};return t("div",{class:I("columns"),style:s,on:{touchmove:o.c}},[this.genColumnItems(),t("div",{class:I("mask"),style:e}),t("div",{class:[a.f,I("frame")],style:i})])},genColumnItems:function(){var i=this,s=this.$createElement;return this.formattedColumns.map(function(t,e){var n;return s(C,{attrs:{readonly:i.readonly,valueKey:i.valueKey,allowHtml:i.allowHtml,className:t.className,itemHeight:i.itemPxHeight,defaultIndex:null!=(n=t.defaultIndex)?n:+i.defaultIndex,swipeDuration:i.swipeDuration,visibleItemCount:i.visibleItemCount,initialOptions:t.values},scopedSlots:{option:i.$scopedSlots.option},on:{change:function(){i.onChange(e)}}})})}},render:function(t){return t("div",{class:I()},["top"===this.toolbarPosition?this.genToolbar():t(),this.loading?t(h.a,{class:I("loading")}):t(),this.slots("columns-top"),this.genColumns(),this.slots("columns-bottom"),"bottom"===this.toolbarPosition?this.genToolbar():t()])}})}}]);