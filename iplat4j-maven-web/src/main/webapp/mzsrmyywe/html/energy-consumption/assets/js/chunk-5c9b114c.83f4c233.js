(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5c9b114c","chunk-1fef27f7","chunk-070d6de6"],{"100e":function(e,t,n){var a=n("cd9d"),r=n("2286"),i=n("c1c9");e.exports=function(e,t){return i(r(e,t,a),e+"")}},"17f9":function(e,t,n){"use strict";n.r(t);var c=n("1da1"),a=(n("4662"),n("28a2")),r=(n("e7e5"),n("d399")),i=n("ade3"),u=(n("96cf"),n("d81d"),n("b0c0"),n("a434"),n("b64b"),n("365c")),o={name:"complete-button",props:{},render:function(){var a=this,t=arguments[0];return t("div",{class:"complete-button"},[t("div",[t("div",{class:"complete-button-image"},[this.upload_list.map(function(n,e){return t("div",{class:"data-upload-center-container"},[t("div",{class:"data-upload-center-sign-image"},[t("global-van-uploader",{attrs:{"file-list":a.file_list[n.key],multiple:!0,"max-count":3,"max-size":8388608},on:{delete:function(e,t){return a.uploader_uploader_delete(n.key,e.file_id)},oversize:function(){return a.uploader_oversize()}},scopedSlots:{default:function(e){return t("span")},previewCover:function(e){return t("div",{class:"data-upload-center-sign-image-item-uploader",on:{click:function(){return a.uploading_image_preview(n.key)}}},[t("img",{attrs:{width:"80",height:"80",src:e.url}})])}}})]),t("global-van-field",{attrs:{center:!0,clearable:!0,disabled:!0,required:!0,label:n.text,placeholder:""},class:"data-upload-center-button-field"},[t("template",{slot:"button"},[t("global-tap",{on:{tap:function(){return a.uploader_photograph_local_tap(n.key,"CAMERA",n.resources)}}},[t("global-van-button",{attrs:{icon:"photograph",type:"primary"}},["相机拍摄"])]),t("global-tap",{class:"complete-button-loader",on:{tap:function(){return a.uploader_photograph_local_tap(n.key,"PHOTOLIBRARY",n.resources)}}},[t("global-van-button",{attrs:{icon:"photo-fail",type:"primary"}},["本地上传"])])])])])})])]),t("global-tap",{class:"complete-button-sumbit",on:{tap:function(){a.complete_sumbit_tap()}}},[t("global-van-button",{attrs:{disabled:this.disabled,type:"primary"}},["完工"])])])},data:function(){var e={file_ids:[],projectId:this.$route.query,disabled:!0,capture:["camera"],workNo:localStorage.getItem("workNo"),name:localStorage.getItem("name"),deptCode:localStorage.getItem("deptCode"),deptName:localStorage.getItem("deptName")};return Object(i.a)(e,"projectId",this.$route.query),Object(i.a)(e,"upload_list",[{text:"完工",key:"complete",resources:"06"}]),Object(i.a)(e,"file_list",{complete:[]}),Object(i.a)(e,"files",{complete:[]}),Object(i.a)(e,"photo_preview",{}),e},watch:{file_list:{handler:function(e,t){this.change_button_type()},deep:!0,immediate:!0}},methods:(o={change_button_type:function(){1<=this.file_list.complete.length?this.disabled=!1:this.disabled=!0},complete_sumbit_tap:function(){this.sumbit_tap_message(),this.$router.push("/hazardous-operation"),r.a.success("提交成功")},uploading_image_preview:function(e){Object(a.a)([e])},uploader_after:function(n,a,r,i){var o=this;return Object(c.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.$toast.loading({message:"上传中...",duration:0,forbidClick:!0}),o.files[a].push(r),e.next=4,Object(u.i)({workNo:o.workNo,name:o.name,relateId:o.projectId.id,statusCode:"05",fileResources:i,base64:r,fileName:"".concat((new Date).getTime(),".png")});case 4:t=e.sent,o.$toast.clear(),t.success?(o.file_list[a].push({url:n,base64:r,file_id:t.data}),o.emit_file_ids()):o.$notify({type:"danger",message:"上传失败"});case 7:case"end":return e.stop()}},e)}))()},uploader_uploader_delete:function(n,a){var r=this;this.file_list[n].map(function(e,t){return e.file_id==a&&r.file_list[n].splice(t,1)}),this.emit_file_ids()},uploader_delete:function(n,a){var r=this;this.file_list[n].map(function(e,t){return e.file_id==a&&r.file_list[n].splice(t,1)}),this.emit_file_ids()},emit_file_ids:function(){var t=this,n=[];Object.keys(this.file_list).map(function(e){return t.file_list[e].map(function(e){return n.push(e.file_id)})}),this.file_ids=n,this.$emit("uploader",n)},uploader_photograph_local_tap:function(a,n,r){var i=this;return Object(c.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={PHOTOLIBRARY:{destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!1,mediaType:Camera.MediaType.PICTURE},CAMERA:{quality:50,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1}},i.m_native_camera_get_picture(t[n],function(){var t=Object(c.a)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[function(){return i.$notify({type:"danger",message:"您未拍照或者未选择照片"})},function(){var t=Object(c.a)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.$utils.getImgToBase64(t);case 2:n=e.sent,i.uploader_after(t,a,n,r);case 4:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()],e.t0=t.success,e.t0)return e.next=5,n[t.data.status](t.data.url);e.next=5;break;case 5:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)}))()}},Object(i.a)(o,"uploading_image_preview",function(e){Object(a.a)(this.file_list[e].map(function(e){return e.url}))}),Object(i.a)(o,"sumbit_tap_message",function(){var t=this;return Object(c.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.c)({workNo:t.workNo,name:t.name,projectId:t.projectId.id});case 2:case"end":return e.stop()}},e)}))()}),o)},n=(n("520e"),n("2877")),o=Object(n.a)(o,void 0,void 0,!1,null,"3276cd99",null);t.default=o.exports},"1ca0":function(e,t,n){var a={"./complete-button.vue":"17f9","./complete-list.vue":"e755"};function r(e){e=i(e);return n(e)}function i(e){if(n.o(a,e))return a[e];e=new Error("Cannot find module '"+e+"'");throw e.code="MODULE_NOT_FOUND",e}r.keys=function(){return Object.keys(a)},r.resolve=i,(e.exports=r).id="1ca0"},"1d92":function(e,t,n){var a=n("e0ef");e.exports=function(e){return a(2,e)}},2286:function(e,t,n){var u=n("85e3"),s=Math.max;e.exports=function(i,o,c){return o=s(void 0===o?i.length-1:o,0),function(){for(var e=arguments,t=-1,n=s(e.length-o,0),a=Array(n);++t<n;)a[t]=e[o+t];for(var t=-1,r=Array(o+1);++t<o;)r[t]=e[t];return r[o]=c(a),u(i,this,r)}}},"2e8e":function(e,t,n){"use strict";n("544d")},"4a68":function(e,t){e.exports=function(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout(function(){e.apply(void 0,n)},t)}},"4b17":function(e,t){e.exports=function(e){return e}},"4c66":function(e,t,n){"use strict";n.r(t);var r=n("ade3"),i=n("5530"),a=n("80b0"),o=n.n(a),c=n("1d92"),u=n.n(c),a=(n("d3b7"),n("ddb0"),n("b0c0"),n("e260"),n("027f")),c=n("2f62");t.default={components:Object(a.a)(n("1ca0").keys()),beforeRouteEnter:function(e,t,n){n(function(e){"user-info"==t.name&&e.other_mutations_animate(Object(i.a)(Object(i.a)({},e.other_state_animate),{},Object(r.a)({},e.$route.name,"right")))})},beforeRouteLeave:function(e,t,n){var a={"police-statistics":null,"police-consumption":null,"report-statistics":null,"police-compare":null,"search-consumption":null,"general-situation":null};this.other_mutations_animate(Object(i.a)(Object(i.a)({},this.other_state_animate),{},Object(r.a)({},e.name,a.hasOwnProperty(e.name)?a[e.name]:"left"))),n()},data:function(){return{m_desc:"局部混入mixin"}},computed:Object(i.a)({},Object(c.b)(["other_state_user_info","other_state_animate","other_state_data_dictionary"])),inject:["provide_set_login_info","provide_clear_login_info","provide_reload_app","provide_set_data_dictionary"],methods:Object(i.a)(Object(i.a)({},Object(c.c)(["other_mutations_hospital_info","other_mutations_animate"])),{},{init_animete:u()(function(){var e=this;this.other_mutations_animate(Object(i.a)(Object(i.a)({},this.other_state_animate),{},{"home-page":"van-fade"})),o()(function(){e.other_mutations_animate(Object(i.a)(Object(i.a)({},e.other_state_animate),{},{"home-page":"right"}))})})}),created:function(){this.init_animete()},mounted:function(){}}},5064:function(e,t,n){},"520e":function(e,t,n){"use strict";n("5064")},"544d":function(e,t,n){},"80b0":function(e,t,n){var a=n("4a68"),n=n("100e")(function(e,t){return a(e,1,t)});e.exports=n},"85e3":function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},c1c9:function(e,t){e.exports=function(e){return e}},cd9d:function(e,t){e.exports=function(e){return e}},e0ef:function(e,t,n){var a=n("4b17");e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=a(e),function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},e755:function(e,t,n){"use strict";n.r(t);var a=n("1da1"),r=(n("96cf"),n("365c")),i={name:"complete-list",props:{},render:function(){var e=arguments[0];return e("div",{class:"complete-list"},[e("global-tap",{attrs:{width:"0%"},class:"complete-list-global-tap"},[e("global-van-cell-group",{attrs:{inset:!0}},[e("global-van-cell",{attrs:{title:"项目",value:this.list_data.projectName}}),e("global-van-cell",{attrs:{title:"状态",value:this.list_data.statusName}}),e("global-van-cell",{attrs:{title:"公司名称",value:this.list_data.companyName}}),e("global-van-cell",{attrs:{title:"负责人",value:this.list_data.principalName}}),e("global-van-cell",{attrs:{title:"联系电话",value:this.list_data.contactTel}})])])])},data:function(){return{projectId:this.$route.query,list_data:[]}},computed:{condition_computed:function(){return{projectId:this.projectId}}},watch:{condition_computed:{handler:function(){this.opened()},deep:!0,immediate:!0}},methods:{opened:function(){var n=this;return Object(a.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.g)({projectId:n.projectId.id});case 2:t=e.sent,n.list_data=t.data;case 4:case"end":return e.stop()}},e)}))()}}},n=(n("2e8e"),n("2877")),i=Object(n.a)(i,void 0,void 0,!1,null,"5bd7fe9e",null);t.default=i.exports}}]);